---
title: 'flexible_deepcopy'
---

```python
def flexible_deepcopy(
    obj: Any,
    on_fail: str = "raise",
    _memo: Optional[Dict[int, Any]] = None,
) -> Any:
```

<p align="right">[source code](https://github.com/unifyai/unify/tree/093d2fb3fd86a8a1a5f0657b4623aaaa0f7b00b1/unify/utils/helpers.py#L177)</p>

Perform a deepcopy that tolerates un‑copyable elements.Parameters
----------
obj : Any
The object you wish to copy.
on_fail : {'raise', 'skip', 'shallow'}, default 'raise'
• 'raise'   – re‑raise copy error (standard behaviour).
• 'skip'    – drop the offending element from the result.
• 'shallow' – insert the original element unchanged.
_memo : dict or None (internal)
Memoisation dict to preserve identity & avoid infinite recursion.Returns
-------
Any
A deep‑copied version of *obj*, modified per *on_fail* strategy.Raises
------
ValueError
If *on_fail* is not one of the accepted values.
Exception
Re‑raises whatever copy error occurred when *on_fail* == 'raise'.